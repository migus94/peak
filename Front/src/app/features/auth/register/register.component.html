<div class="register">
    <h1 class="register--title">Unete!</h1>
    <form 
        [formGroup]="form"
        (ngSubmit)="register()"
        class="register--form"
        novalidate
    >
        <div class="form-group">
            <label for="name">Nombre</label>
            <input 
                id="name"
                type="text"
                formControlName="name"
                class="input"
                [class.invalid]="form.controls['name'].invalid && form.controls['name'].touched"
                placeholder="Nombre completo..."
            />
            @if (form.controls['name'].touched && form.controls['name'].hasError('required')) {
            <div class="error">El nombre es necesario</div>
            }
            @if (form.controls['name'].touched && form.controls['name'].hasError('minLength')) {
                <div class="error">Nombre demasiado corto</div>
            }
        </div>
        <div class="form-group">
            <label for="email">Correo electrónico</label>
            <input 
                id="email"
                type="email"
                formControlName="email"
                [class.invalid]="form.controls['email'].invalid && form.controls['email'].touched"
                placeholder="example@..."
            />
            @if (form.controls['email'].touched && form.controls['email'].hasError('required')) {
            <div class="error">Correo obligatorio</div>
            }
            @if (form.controls['email'].touched && form.controls['email'].hasError('email')) {
                <div class="error">Correo inválido</div>
            }
        </div>

         <div class="form-group">
            <label for="password">Contraseña</label>
            <input 
                id="password"
                type="password"
                formControlName="password"
                [class.invalid]="form.controls['password'].invalid && form.controls['password'].touched"
                placeholder="******"
            />
            @if (form.controls['password'].touched && form.controls['password'].hasError('required')) {
            <div class="error">Contraseña obligatoria</div>
            }
            @if (form.controls['password'].touched && form.controls['password'].hasError('minLength')) {
                <div class="error">La contraseña debe tener más de 5 caracteres</div>
            }
        </div>

        <button 
            type="submit"
            [disabled]="!canSubmit() || isLoading()"
            class="btn btn-primary"
        >
            @if (isLoading()) {
                Registrando...
            } @else { 
                Registrar
            }
        </button>

        @if (errorMsg()) {
            <div class="error">{{ errorMsg() }}</div>
        }
    </form>
</div>